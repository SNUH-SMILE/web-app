<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.hconnect.sqlmapper">

    <!-- 공통코드 정보 조회 - kr.co.hconnect.sqlmapper.selectComCd -->
    <select id="selectComCd"
            parameterType="kr.co.hconnect.vo.ComCdSearchVO"
            resultType="kr.co.hconnect.vo.ComCdVO">
        SELECT A.COM_CD                      -- 공통코드
             , A.COM_CD_NM                   -- 공통코드명
             , A.COM_CD_DIV                  -- 공통코드구분
             , A.USE_YN                      -- 사용여부
             , A.REMARK                      -- 리마크
             , A.REG_ID
             , UR.USER_NM        AS REG_NM
             , A.REG_DT
             , A.UPD_ID
             , UU.USER_NM        AS UPD_NM
             , A.UPD_DT
          FROM COM_CD A
                LEFT JOIN USER UR ON A.REG_ID = UR.USER_ID
                LEFT JOIN USER UU ON A.UPD_ID = UU.USER_ID
         WHERE A.COM_CD = #{comCd}

        <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(comCdNm)">
            AND A.COM_CD_NM LIKE CONCAT('%', #{comCdNm}, '%')
        </if>
        <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(useYn)">
            AND A.USE_YN = #{useYn}
        </if>
    </select>

    <!-- 공통코드 리스트 조회 - kr.co.hconnect.sqlmapper.selectComCdList -->
    <select id="selectComCdList"
            parameterType="kr.co.hconnect.vo.ComCdSearchVO"
            resultType="kr.co.hconnect.vo.ComCdVO">
        SELECT A.COM_CD                      -- 공통코드
             , A.COM_CD_NM                   -- 공통코드명
             , A.COM_CD_DIV                  -- 공통코드구분
             , A.USE_YN                      -- 사용여부
             , A.REMARK                      -- 리마크
             , A.REG_ID
             , UR.USER_NM        AS REG_NM
             , A.REG_DT
             , A.UPD_ID
             , UU.USER_NM        AS UPD_NM
             , A.UPD_DT
          FROM COM_CD A
               LEFT JOIN USER UR ON A.REG_ID = UR.USER_ID
               LEFT JOIN USER UU ON A.UPD_ID = UU.USER_ID

        <where>
            <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(comCd)">
                AND A.COM_CD = #{comCd}
            </if>
            <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(comCdNm)">
                AND A.COM_CD_NM LIKE CONCAT('%', #{comCdNm}, '%')
            </if>
            <if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(useYn)">
                AND A.USE_YN = #{useYn}
            </if>
        </where>

         ORDER BY A.COM_CD

    </select>

    <!-- 공통코드 생성 - kr.co.hconnect.sqlmapper.insertComCd -->
    <insert id="insertComCd" parameterType="kr.co.hconnect.vo.ComCdVO">
        INSERT
          INTO COM_CD
             ( COM_CD
             , COM_CD_NM
             , COM_CD_DIV
             , USE_YN
             , REMARK
             , REG_ID
             , UPD_ID
             )
        VALUES
             ( #{comCd}
             , #{comCdNm}
             , #{comCdDiv}
             , #{useYn}
             , #{remark}
             , #{regId}
             , #{regId}
             )
    </insert>

    <!-- 공통코드 수정 - kr.co.hconnect.sqlmapper.updateComCd -->
    <update id="updateComCd" parameterType="kr.co.hconnect.vo.ComCdVO">
        UPDATE COM_CD
           SET COM_CD_NM  = #{comCdNm}
             , COM_CD_DIV = #{comCdDiv}
             , USE_YN     = #{useYn}
             , REMARK     = #{remark}
             , UPD_ID     = #{updId}
             , UPD_DT     = NOW()
         WHERE COM_CD = #{comCd}
    </update>


<!--    &lt;!&ndash; 공통코드 by Code 조회 &ndash;&gt;-->
<!--    <select id="selectComCdByCode" parameterType="String" resultType="kr.co.hconnect.vo.ComCdVO">-->
<!--		<![CDATA[-->
<!--        SELECT A.COM_CD        	&#45;&#45; 공통코드-->
<!--             , A.COM_CD_NM      &#45;&#45; 공통코드명-->
<!--             , A.USE_YN         &#45;&#45; 사용여부-->
<!--             , A.COM_CD_DIV     &#45;&#45; 공통코드구분-->
<!--             , A.REMARK         &#45;&#45; 공통코드 리마크-->
<!--             , A.REG_ID         &#45;&#45; 등록자ID-->
<!--             , A.REG_DT         &#45;&#45; 등록일자-->
<!--             , A.UPD_ID         &#45;&#45; 수정자ID-->
<!--             , A.UPD_DT         &#45;&#45; 수정일자-->

<!--          FROM COM_CD A-->
<!--         WHERE A.COM_CD = #{comCd}-->
<!--        ]]>-->
<!--	</select>-->

<!--    &lt;!&ndash; 공통코드 목록 조회 &ndash;&gt;-->
<!--    <select id="selectComCdList" parameterType="kr.co.hconnect.vo.ComCdVO" resultType="kr.co.hconnect.vo.ComCdVO">-->
<!--        <![CDATA[-->
<!--		SELECT A.COM_CD        	&#45;&#45; 공통코드-->
<!--		     , A.COM_CD_NM      &#45;&#45; 공통코드명-->
<!--		     , A.USE_YN         &#45;&#45; 사용여부-->
<!--		     , A.COM_CD_DIV     &#45;&#45; 공통코드구분-->
<!--		     , A.REMARK         &#45;&#45; 공통코드 리마크-->
<!--		     , A.REG_ID         &#45;&#45; 등록자ID-->
<!--		     , A.REG_DT         &#45;&#45; 등록일자-->
<!--		     , A.UPD_ID         &#45;&#45; 수정자ID-->
<!--		     , A.UPD_DT         &#45;&#45; 수정일자-->

<!--		  FROM COM_CD A-->
<!--	]]>-->
<!--    <choose>-->
<!--      <when test="useYn == null or useYn == ''">-->
<!--         WHERE A.USE_YN = IFNULL(UPPER(#{useYn}),'Y')-->
<!--      </when>-->
<!--      <otherwise>-->
<!--         WHERE 1 = 1-->
<!--      </otherwise>-->
<!--    </choose>-->
<!--    <if test="comCd != null and comCd != ''">-->
<!--           AND A.COM_CD LIKE CONCAT(UPPER(#{comCd}), '%')-->
<!--    </if>-->
<!--    <if test="comCdNm != null and comCdNm != ''">-->
<!--           AND UPPER(A.COM_CD_NM) LIKE CONCAT(UPPER(#{comCdNm}), '%')-->
<!--    </if>-->
<!--      ORDER BY A.COM_CD ASC-->
<!--</select>-->

<!--    &lt;!&ndash; 공통코드상세 리스트 조회 (selectBox 바인딩용)&ndash;&gt;-->
<!--    <select id="selectComCdDetailList-delete" parameterType="kr.co.hconnect.vo.ComCdDetailListVO" resultType="kr.co.hconnect.vo.ComCdDetailListVO">-->
<!--        <![CDATA[-->
<!--		SELECT A.COM_CD        AS COM_CD			&#45;&#45; 공통코드-->
<!--		     , A.COM_CD_NM     AS COM_CD_NM         &#45;&#45; 공통코드명-->
<!--		     , A.COM_CD_DIV    AS COM_CD_DIV        &#45;&#45; 공통코드구분-->
<!--		     , A.REMARK        AS COM_CD_REMARK     &#45;&#45; 공통코드 리마크-->
<!--		     , B.DETAIL_CD     AS DETAIL_CD         &#45;&#45; 세부코드-->
<!--		     , B.DETAIL_CD_NM  AS DETAIL_CD_NM      &#45;&#45; 세부코드명-->
<!--		     , B.PROPERTY1     AS PROPERTY1         &#45;&#45; 속성1-->
<!--		     , B.PROPERTY2     AS PROPERTY2         &#45;&#45; 속성2-->
<!--		     , B.PROPERTY3     AS PROPERTY3         &#45;&#45; 속성3-->
<!--		     , B.USE_YN        AS USE_YN            &#45;&#45; 공통코드상세 사용여부-->
<!--		     , B.REMARK        AS REMARK            &#45;&#45; 공통코드상세 리마크-->
<!--		  FROM COM_CD A-->
<!--		       INNER JOIN COM_CD_DETAIL B ON A.COM_CD = B.COM_CD-->
<!--		 WHERE A.USE_YN = IFNULL(#{useYn}, 'Y')-->
<!--		   AND A.COM_CD = #{comCd}-->
<!--	]]>-->

<!--        <if test="detailCd != null and detailCd != ''">-->
<!--            AND B.DETAIL_CD = #{detailCd}-->
<!--        </if>-->

<!--        <if test="property1 != null and property1 != ''">-->
<!--            AND B.PROPERTY1 = #{property1}-->
<!--        </if>-->

<!--        <if test="property2 != null and property2 != ''">-->
<!--            AND B.PROPERTY2 = #{property2}-->
<!--        </if>-->

<!--        <if test="property3 != null and property3 != ''">-->
<!--            AND B.PROPERTY3 = #{property3}-->
<!--        </if>-->

<!--    </select>-->

<!--    &lt;!&ndash; 공통코드 입력 &ndash;&gt;-->
<!--    <insert id="insertComCd" parameterType="kr.co.hconnect.vo.ComCdVO">-->
<!--	    <![CDATA[-->
<!--        INSERT INTO COM_CD-->
<!--                  ( COM_CD                         &#45;&#45; 공통코드-->
<!--                  , COM_CD_NM                      &#45;&#45; 공통코드명-->
<!--                  , COM_CD_DIV                     &#45;&#45; 공통코드구분-->
<!--                  , REMARK                         &#45;&#45; 공통코드 리마크-->
<!--                  , REG_ID                         &#45;&#45; 등록자-->
<!--                  , UPD_ID                         &#45;&#45; 수정자-->
<!--                  )-->
<!--             VALUES-->
<!--                  ( #{comCd}-->
<!--                  , #{comCdNm}-->
<!--                  , #{comCdDiv}-->
<!--                  , #{remark}-->
<!--                  , #{regId}-->
<!--                  , #{updId}-->
<!--                  )-->
<!--        ]]>-->
<!--	</insert>-->

<!--    &lt;!&ndash; 공통코드 수정 &ndash;&gt;-->
<!--    <update id="updateComCd" parameterType="kr.co.hconnect.vo.ComCdVO">-->
<!--        <![CDATA[-->
<!--        UPDATE COM_CD-->
<!--           SET COM_CD_NM  = #{comCdNm}                &#45;&#45; 공통코드명-->
<!--             , COM_CD_DIV = #{comCdDiv}               &#45;&#45; 공통코드구분-->
<!--             , REMARK     = #{remark}                 &#45;&#45; 리마크-->
<!--             , UPD_ID     = #{updId}                  &#45;&#45; 수정자-->
<!--             , UPD_DT     = current_timestamp()       &#45;&#45; 수정일시-->
<!--         WHERE COM_CD     = #{comCd}                   -->
<!--        ]]>-->
<!--	</update>-->

<!--    &lt;!&ndash; 공통코드 비활성화 update &ndash;&gt;-->
<!--    <update id="deleteComCd" parameterType="String">-->
<!--        <![CDATA[-->
<!--        UPDATE COM_CD-->
<!--           SET USE_YN = 'N'                           &#45;&#45; 사용여부-->
<!--             , UPD_ID = #{updId}                      &#45;&#45; 수정자-->
<!--             , UPD_DT = current_timestamp()           &#45;&#45; 수정일시-->
<!--         WHERE COM_CD = #{comCd}-->
<!--        ]]>-->
<!--	</update>-->

<!--    &lt;!&ndash; 공통코드상세 리스트 조회 &ndash;&gt;-->
<!--    <select id="selectComDetailList" parameterType="kr.co.hconnect.vo.ComCdDetailVO" resultType="kr.co.hconnect.vo.ComCdDetailVO">-->
<!--        <![CDATA[-->
<!--		SELECT COM_CD                                    &#45;&#45; 공통코드-->
<!--		     , DETAIL_CD                                 &#45;&#45; 세부코드-->
<!--		     , DETAIL_CD_NM                              &#45;&#45; 세부코드명-->
<!--		     , SORT_SEQ                                  &#45;&#45; 정렬순서-->
<!--		     , REMARK                                    &#45;&#45; 세부코드 리마크-->
<!--		     , COALESCE(PROPERTY1,'') AS PROPERTY1       &#45;&#45; 속성1-->
<!--		     , COALESCE(PROPERTY2,'') AS PROPERTY2       &#45;&#45; 속성2-->
<!--		     , COALESCE(PROPERTY3,'') AS PROPERTY3       &#45;&#45; 속성3-->
<!--		     , USE_YN                                    &#45;&#45; 공통코드상세 사용여부-->
<!--		     , COALESCE(REMARK,'')    AS REMARK          &#45;&#45; 공통코드상세 리마크-->
<!--		  FROM COM_CD_DETAIL-->

<!--		]]>-->
<!--        <choose>-->
<!--        <when test="useYn == null or useYn == ''">-->
<!--         WHERE USE_YN = IFNULL(UPPER(#{useYn}),'Y')-->
<!--           AND COM_CD = UPPER(#{comCd})-->
<!--        </when>-->
<!--        <otherwise>-->
<!--         WHERE COM_CD = UPPER(#{comCd})-->
<!--        </otherwise>-->
<!--        </choose>-->
<!--        <if test="detailCd != null and detailCd != ''">-->
<!--           AND DETAIL_CD LIKE CONCAT(UPPER(#{detailCd}), '%')-->
<!--        </if>-->

<!--        <if test="detailCdNm != null and detailCdNm != ''">-->
<!--           AND UPPER(DETAIL_CD_NM) LIKE CONCAT(UPPER(#{detailCdNm}), '%')-->
<!--        </if>-->

<!--        <if test="property1 != null and property1 != ''">-->
<!--           AND UPPER(PROPERTY1) LIKE CONCAT(UPPER(#{property1}), '%')-->
<!--        </if>-->

<!--        <if test="property2 != null and property2 != ''">-->
<!--           AND UPPER(PROPERTY2) LIKE CONCAT(UPPER(#{property2}), '%')-->
<!--        </if>-->

<!--        <if test="property3 != null and property3 != ''">-->
<!--           AND UPPER(PROPERTY3) LIKE CONCAT(UPPER(#{property3}), '%')-->
<!--        </if>-->
<!--      ORDER BY SORT_SEQ ASC-->
<!--             , DETAIL_CD ASC-->
<!--    </select>-->

<!--    &lt;!&ndash; 세부코드 by Code 조회 &ndash;&gt;-->
<!--    <select id="selectDetailCdByCode" parameterType="kr.co.hconnect.vo.ComCdDetailVO" resultType="kr.co.hconnect.vo.ComCdDetailVO">-->
<!--        <![CDATA[-->
<!--        SELECT COM_CD                                    &#45;&#45; 공통코드-->
<!--             , DETAIL_CD                                 &#45;&#45; 세부코드-->
<!--             , DETAIL_CD_NM                              &#45;&#45; 세부코드명-->
<!--             , SORT_SEQ                                  &#45;&#45; 정렬순서-->
<!--             , REMARK                                    &#45;&#45; 세부코드 리마크-->
<!--             , COALESCE(PROPERTY1,'') AS PROPERTY1       &#45;&#45; 속성1-->
<!--             , COALESCE(PROPERTY2,'') AS PROPERTY2       &#45;&#45; 속성2-->
<!--             , COALESCE(PROPERTY3,'') AS PROPERTY3       &#45;&#45; 속성3-->
<!--             , USE_YN                                    &#45;&#45; 공통코드상세 사용여부-->
<!--             , COALESCE(REMARK,'')    AS REMARK          &#45;&#45; 공통코드상세 리마크-->
<!--          FROM COM_CD_DETAIL                                                     -->
<!--         WHERE COM_CD    = #{comCd}-->
<!--           AND DETAIL_CD = #{detailCd}-->
<!--        ]]>-->
<!--	</select>-->


<!--    &lt;!&ndash; 공통코드 세부코드 신규 저장 &ndash;&gt;-->
<!--    <insert id="insertComCdDetail" parameterType="kr.co.hconnect.vo.ComCdDetailVO">-->
<!--		<![CDATA[-->
<!--        INSERT-->
<!--          INTO COM_CD_DETAIL-->
<!--          ( COM_CD         &#45;&#45; 공통코드-->
<!--          , DETAIL_CD      &#45;&#45; 세부코드-->
<!--          , DETAIL_CD_NM   &#45;&#45; 세부코드명-->
<!--          , SORT_SEQ       &#45;&#45; 정렬순서-->
<!--          , PROPERTY1      &#45;&#45; 속성1-->
<!--          , PROPERTY2      &#45;&#45; 속성2-->
<!--          , PROPERTY3      &#45;&#45; 속성3-->
<!--          , REMARK         &#45;&#45; 공통코드 리마크-->
<!--          , REG_ID         &#45;&#45; 등록자ID-->
<!--          , UPD_ID         &#45;&#45; 수정자ID-->
<!--          )-->
<!--        VALUES-->
<!--          (-->
<!--            #{comCd}-->
<!--          , UPPER(#{detailCd})-->
<!--          , #{detailCdNm}-->
<!--          , #{sortSeq}-->
<!--          , #{property1}-->
<!--          , #{property2}-->
<!--          , #{property3}-->
<!--          , #{remark}-->
<!--          , #{regId}-->
<!--          , #{updId}-->
<!--          )-->
<!--        ]]>-->
<!--	</insert>-->


<!--    &lt;!&ndash; 세부코드 수정 &ndash;&gt;-->
<!--    <update id="updateComCdDetail" parameterType="kr.co.hconnect.vo.ComCdDetailVO">-->
<!--		<![CDATA[-->
<!--        UPDATE COM_CD_DETAIL-->
<!--           SET-->
<!--               DETAIL_CD_NM = #{detailCdNm}               &#45;&#45; 세부코드명-->
<!--             , SORT_SEQ     = #{sortSeq}                  &#45;&#45; 정렬순서-->
<!--             , PROPERTY1    = #{property1}                &#45;&#45; property1-->
<!--             , PROPERTY2    = #{property2}                &#45;&#45; property2-->
<!--             , PROPERTY3    = #{property3}                &#45;&#45; property3-->
<!--             , REMARK       = #{remark}                   &#45;&#45; 리마크-->
<!--             , UPD_ID       = #{updId}                    &#45;&#45; 수정자-->
<!--             , UPD_DT       = current_timestamp()         &#45;&#45; 수정일시-->
<!--         WHERE COM_CD       = #{comCd}-->
<!--           AND DETAIL_CD    = UPPER(#{detailCd})-->
<!--        ]]>-->
<!--	</update>-->

<!--    &lt;!&ndash; 세부코드 비활성화 update &ndash;&gt;-->
<!--    <update id="deleteComDetail" parameterType="kr.co.hconnect.vo.ComCdDetailVO">-->
<!--		<![CDATA[-->
<!--        UPDATE COM_CD_DETAIL-->
<!--           SET-->
<!--               USE_YN    = 'N'                          &#45;&#45; 사용여부-->
<!--             , UPD_ID    = #{updId}                     &#45;&#45; 수정자-->
<!--             , UPD_DT    = current_timestamp()          &#45;&#45; 수정일시-->
<!--         WHERE COM_CD    = #{comCd}-->
<!--           AND DETAIL_CD = UPPER(#{detailCd})-->

<!--        ]]>-->
<!--	</update>-->


</mapper>
